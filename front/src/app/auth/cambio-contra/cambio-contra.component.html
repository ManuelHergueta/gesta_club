<div class="container h-100">

  <div class="row h-100 d-flex align-items-center justify-content-center">

    <div class="formulario m-5 col-md-10 col-lg-8">

      <div class="logo m-5 text-center">
        <img class="" src="../../../assets/logo_gestaclub_modif.png" alt="Logo GestaClub App">
      </div>

      <form class="m-5 needs-validation" novalidate [formGroup]="this.formCambioContra" (ngSubmit)="cambiarContra()">

        <h3 class="my-4">Cambio de contraseña de {{email}}</h3>

        <div *ngIf="this.falloCambioContra" class="alert alert-danger alert-dismissible" role="alert">
          Error en el proceso de cambio de contraseña.
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <div *ngIf="this.exitoCambioContra" class="alert alert-success alert-dismissibleposition-fixed fade show"
        role="alert">
           Cambio realizado correctamente. Ya se puede autenticar con sus nuevos datos.
            <div class="d-flex justify-content-end">
              <button (click)="hacerLogin()" type="button" class="btn btn-outline-success btn-sm"
                data-mdb-riple-color="dark" data-bs-dismiss="alert" aria-label="Close">Login</button>
            </div>
        </div>

        <div *ngIf="this.passDistintas" class="form-text errorRegister text-danger fs-5 my-4">
          <p>Las contraseñas introducidas son distintas.</p>
        </div>

        <div class="form-outline my-5">
          <span class="form-text text-danger fs-6"
            *ngIf="this.formCambioContra.get('pass1')?.invalid && this.formCambioContra.get('pass1')?.touched">
            Introduzca contraseña</span>

          <input
            type="password"
            id="formRegisterPass1"
            name="formRegisterPass1"
            formControlName="pass1"
            class="form-control"
            placeholder="Introduzca nueva contraseña"
            [ngClass]="{'is-invalid': this.formCambioContra.get('pass1')?.invalid && this.formCambioContra.get('pass1')?.touched}"
          />

        </div>

        <div class="form-outline my-5">
          <span class="form-text text-danger fs-6"
            *ngIf="this.passDistintas">
            La contraseña no coincide</span>

          <input
            type="password"
            id="formRegisterPass2"
            name="formRegisterPass2"
            formControlName="pass2"
            class="form-control"
            placeholder="Repita la contraseña"
            [ngClass]="{'is-invalid':this.formCambioContra.get('pass2')?.invalid && this.formCambioContra.get('pass2')?.touched}"
          />

        </div>

        <div *ngIf="!this.exitoCambioContra" class="d-grid gap-2 col-6 mx-auto">
          <button
          [disabled]="this.formCambioContra.invalid"
          type="submit"
          class="btn btn-primary btn-block mb-3">
          Aceptar
          </button>
        </div>

      </form>

    </div>
  </div>
</div>
